<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Street Fighter Server - Test</title>
	<style>
		body {
			font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			max-width: 800px;
			margin: 0 auto;
			padding: 20px;
			line-height: 1.6;
		}
		h1 {
			color: #333;
			border-bottom: 2px solid #eee;
			padding-bottom: 10px;
		}
		pre {
			background-color: #f6f8fa;
			border-radius: 6px;
			padding: 16px;
			overflow: auto;
		}
		code {
			font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
			font-size: 14px;
		}
		.card {
			background-color: #f6f8fa;
			border-radius: 6px;
			padding: 20px;
			margin-bottom: 20px;
		}
		button {
			background-color: #2ea44f;
			color: white;
			border: none;
			border-radius: 6px;
			padding: 8px 16px;
			font-size: 14px;
			cursor: pointer;
		}
		button:hover {
			background-color: #2c974b;
		}
	</style>
</head>
<body>
	<h1>Street Fighter Server</h1>
	
	<div class="card">
		<h2>Server Status</h2>
		<p>The server is up and running! You can connect to it from your game client.</p>
		<button id="test-lobbies">Test Lobbies API</button>
		<pre id="lobbies-output">// API response will appear here</pre>
	</div>
	
	<div class="card">
		<h2>API Endpoints</h2>
		<ul>
			<li><code>/api/lobbies</code> - Get a list of active game lobbies</li>
			<li><code>/room/:roomId</code> - WebSocket endpoint for game rooms</li>
		</ul>
	</div>
	
	<div class="card">
		<h2>Connection Example</h2>
		<pre><code>// Create a WebSocket connection
const ws = new WebSocket("wss://street-fighter-server.matthieu-laurentg.workers.dev/room/test-room?tanked=false");

// Set up event listeners
ws.onopen = () => console.log("Connected!");
ws.onmessage = (event) => console.log(event.data);
ws.onclose = () => console.log("Disconnected");
</code></pre>
	</div>
	
	<script>
		document.getElementById('test-lobbies').addEventListener('click', async () => {
			try {
				const response = await fetch('/api/lobbies');
				const data = await response.json();
				document.getElementById('lobbies-output').textContent = JSON.stringify(data, null, 2);
			} catch (error) {
				document.getElementById('lobbies-output').textContent = `Error: ${error.message}`;
			}
		});
	</script>
</body>
</html>
